class Kleur{luminance(t){var e=[t[0],t[1],t[2]].map(function(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)});return.2126*e[0]+.7152*e[1]+.0722*e[2]}contrast(t,e){var r=luminance(t),a=luminance(e),n=Math.max(r,a),o=Math.min(r,a);return result=(n+.05)/(o+.05),result<1&&(result=1/result),result}rgb_xyz(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}xyz_lab(t){return t>.008856452?Math.pow(t,1/3):t/.12841855+.12841855}lab_xyz(t){return t>.206896552?t*t*t:.12841855*(t-.12841855)}rgb_to_xyz(t){let e=t[0],r=t[1],a=t[2];e=this.rgb_xyz(e),r=this.rgb_xyz(r),a=this.rgb_xyz(a);let n=this.xyz_lab((.4124564*e+.3575761*r+.1804375*a)/.95047),o=this.xyz_lab((.2126729*e+.7151522*r+.072175*a)/1),h=this.xyz_lab((.0193339*e+.119192*r+.9503041*a)/1.08883);return[Number(n.toFixed(4)),Number(o.toFixed(4)),Number(h.toFixed(4))]}lab_to_lch(t){var e=t[0],r=t[1],a=t[2],n=Math.sqrt(r*r+a*a),o=(Math.atan2(a,r)*(180/3.14)+360)%360;return 0===Math.round(1e4*n)&&(o=Number.NaN),[Math.round(e),Math.round(n),Math.round(o)]}rgb_to_lab(t){let e=t[0],r=t[1],a=t[2],n=Math.round(116*r-16);return[n<0?0:n,Math.round(500*(e-r)),Math.round(200*(r-a))]}difference(t,e){return Delta=Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])),Delta/100}componentToHex(t){var e=t.toString(16);return 1==e.length?"0"+e:e}hexToRgb(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}rgbToHex(t,e,r){return"#"+this.componentToHex(t)+this.componentToHex(e)+this.componentToHex(r)}groupBy(t,e){const r=new Map;return t.forEach(t=>{const a=e(t),n=r.get(a);n?n.push(t):r.set(a,[t])}),r}rgb_to_hsv(t){let e=t[0]/255,r=t[1]/255,a=t[2]/255,n=Math.max(e,r,a),o=Math.min(e,r,a);if(t[0]==t[1]&&t[1]==t[2]&&t[2]==t[0])return[0,0,Math.round(100*n)];let h,l=n-o;return e===n?h=(r-a)/l:r===n?h=2+(a-e)/l:a===n?h=4+(e-r)/l:console.log("wrong"),(h*=60)<0&&(h+=360),[Math.round(h),Math.round(l/n*100),Math.round(100*n)]}getColorArr(t){t.style.display="none";let e=document.querySelector("body").appendChild(document.createElement("canvas")),r=e.getContext("2d");return e.style="display: none;",r.canvas.width=t.width,r.canvas.height=t.height,r.drawImage(imageObj,0,0,t.width,t.height),r.getImageData(0,0,e.width,e.height).data}init(t){let e=document.createElement("img");return e.src=t,e.id="sad",e.crossOrigin="Anonymous",e.style="display: none;",e}generateColorArray(t){let e=[];for(var r=0;r<t.length;r+=4){let h={};var a=t[r],n=t[r+1],o=t[r+2];t[r+3];h.hex=this.rgbToHex(a,n,o),e.push(h)}const h=this.groupBy(e,t=>t.hex);h.forEach(function(t,e){h.set(e,t.length)}),h.forEach(t=>{t.count<imageObj.height*imageObj.width/100&&h.pop(t)});const l=new Map([...h.entries()].sort((t,e)=>e[1]-t[1]));let u,s,i=[];for([u,s]of l.entries()){let t=this.hexToRgb(u),e={};e.hex=u,e.rgb=t,e.hsv=this.rgb_to_hsv(t),e.xyz=this.rgb_to_xyz(t),e.lab=this.rgb_to_lab(e.xyz),e.lch=this.lab_to_lch(e.lab),e.count=s,i.push(e)}return i}getSwatch(t){for(i=0;i<t.length;i++)Math.abs(t[i].lab[1]-t[i].lab[2])>20&&light.push(t[i]);return[]}getRandomSwatch(t){let e=[];for(let r=0;r<20;r++){let r=t[Math.floor(Math.random()*t.length)];e.push(r)}return e.sort((t,e)=>parseFloat(t.count)-parseFloat(e.count)),e}getLightColors(t){let e=[];return t.forEach(t=>{t.lab[0]>60&&e.push(t)}),e}getDarkColors(t){let e=[];return t.forEach(t=>{t.lab[0]<60&&e.push(t)}),e}getDominant(t){return t[0]}makeDarker(t){let e=this.hexToRgb(t);return this.rgbToHex(Math.round(e[0]/4),Math.round(e[1]/4),Math.round(e[2]/4))}getVIbrant(t,e=30){let r=[];for(let a=0;a<t.length;a++)Math.abs(t[a].lab[1]-t[a].lab[2])>e&&r.push(t[a]);return r}}
